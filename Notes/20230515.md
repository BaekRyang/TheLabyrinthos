# 20230515 Logs
1. 폰트 추가  
   기본 폰트가 너무 해상도가 낮아서 `Roboto`와 `NotoSansKr`을 따로 넣어줬다.  
2. 아이템들과 상호작용 가능한 물체들에 Outline을 상시 표시하도록 수정하였음 - 어떤 물체가 의미 있는 물체인지 알기 쉽게 하려고  
   그런데 렉이 좀 걸리는거 같은데 이거 때문인지는 테스트를 해봐야함  
3. 전투씬에서 무기를 정상적으로 인식하지 못하는 문제가 있었음. 확인해보니 다음과 같은 부분의 코드에 문제가 있었음
   ```c#
   GetComponent<Player>().WP_weapon = new Weapon(dict_items[0]);
   //플레이어의 무기를 설정하는 부분인데, dict_items는 Items지만 Weapon으로 넘어갈줄 알았는데,
   //Weapon에서 Item을 Param으로 받으면 내부 데이터를 싹 날리고 가져왔었음

   GetComponent<Player>().WP_weapon = new Weapon(dict_items[0] as Weapon);
   //그래서 as Weapon 키워드를 넣어서 무기로 바꿔서 넣으니 해결됨
   ```
4. 조합 시스템 수정
   어제 바꾼 시스템중 아이템을 미리 가져가고 조합을 할때 추가로 가져가지 않는 방식이 문제가 있었음  
   아이템을 가져갔는데, 아이템이 없는 경우에 창을 닫을때 소유중이지 않던 아이템도 인벤에 다시 넣어주는 문제가 발견됨
   ```c#
   public void ResetCells(bool returnItem) //제작 칸을 전부 비우고 초기화 한다.
    {
        //아이템창이 비어있을때 추가적인 작업을 하지 않도록 return 시켜준다
        if (GO_resourceCells[0].GetComponent<ItemObject>().I_item == null)
        //아래쪽 코드보다 먼저 작성했었는데, 자꾸 AddItem()을 이상하게 호출해서 넣었지만
        //아래쪽 코드가 생겨서 이제 필요가 없을거 같다. 
            return;


        /*...*/

        if (returnItem) //아이템을 반환해야 하는지 확인을 하고서 반환을 한다.
        {
            for (int i = 0; i < 5; i++)
            {
                //해당 셀이 실제로 아이템을 갖고 있었는지 데이터를 저장해서 확인하고 돌려주도록 수정함
                if (GO_resourceCells[i].activeSelf && GO_resourceCells[i].GetComponent<ItemObject>().hasItem)
                {
                    IM_manager.AddItem(
                        GO_resourceCells[i].GetComponent<ItemObject>().I_item,

                        int.Parse(GO_resourceCells[i].transform.GetChild(1).GetComponent<TMP_Text>().text));
                }
            }
        }

        /*...*/

    }
   ```
   위와 같이 아이템을 확인하고 넣어주는 방식으로 수정하였음.  
   
5. 조합 확인 로직 수정  
   위에서 hasItem키워드를 사용함으로 아이템을 갖고있는지 확인하는 `CalcCanCraft()` 메서드도 위의 키워드를 사용하도록 수정함
   ```c#
   public void CalcCanCraft() //레시피 칸에 있는 아이템들을 소유하고 있는지 확인하는 메서드
    {
        int count = 0;
        int unprepared = 0;
        foreach (var kvp in dict_targetRecipe)
        {
            //hasItem을 확인하도록 수정함
            if (GO_resourceCells[count].GetComponent<ItemObject>().hasItem)
                GO_resourceCells[count].GetComponent<ItemObject>().TansparentItem(false);
            else
            {
                GO_resourceCells[count].GetComponent<ItemObject>().TansparentItem(true);
                unprepared++; //없으면 반투명시키고, 카운트 증가
            }
            count++;
        }

        /*...*/
            
    }
   ```

6. Outline을 enable하고 disable하는 과정을 property수정 방식에서 `Interactable`클래스의 메서드 호출 방식으로 수정함
   ```c#
   //나중에 어떤 작업이 더 필요하지 모르니까 메서드화 시켜줬음
   public void ChangeState(bool enabled)
    {
        Outline outline = GetComponent<Outline>();

        outline.OutlineColor = enabled ? enabledOutlineColor : disabledOutlineColor;
        outline.OutlineWidth = enabled ? enabledOutlineWidth : disabledOutlineWidth;
    }
   ```

7. 인게임 시스템 메뉴에 세팅 버튼이 위치만하고 작동하지는 않았는데 기능 추가  
   사실 금방 되는건데 이유없이 미루고 있었음. UI는 메인씬의 세팅 UI를 그대로 따라감

8. Lerp클래스에 Lerp가 끝난 후 특정 작업을 실행할 수 있도록 LerpValueAfter() 메서드를 추가함
   ```c#
   public static IEnumerator LerpValueAfter<T>(
        Action<T> valueSetter,            
        T from,                           
        T to,                             
        float duration,                   
        Func<T, T, float, T> lerpFunction,
        Func<float, float> easingFunction,
        Action afterFunc = null)          
    {
        yield return LerpValue(valueSetter, from, to, duration, lerpFunction, easingFunction);

        afterFunc?.Invoke();
    }
   ```
   기존 LerpValue()를 그대로 실행하고, 마지막에 afterFunc가 null이 아니면 실행하는 방식으로 구현하였음